using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Networking;
using UnityEngine.SceneManagement;
using UnityEditor.ShaderGraph.Serialization;
using System.Runtime.ConstrainedExecution;
using UnityEngine.UI;
using UnityEngine.Video;

public class ControlEscenas : MonoBehaviour
{
    public Image Barra;
    public float porcentage;
    public TMPro.TextMeshProUGUI Progreso;
    [SerializeField]
    private GameObject ActivarBarra;
    AsyncOperation Operacion;
    //Cambiar escenarios.
    public void cargarE(string nombreE)
    {
        SceneManager.LoadScene(nombreE);

    }

    public void Iniciar()
    {
        ActivarBarra.SetActive(true);
        StartCoroutine(CargandoSimulacion(1));
    }
    IEnumerator CargandoSimulacion(int nivel)
    {
        Operacion = SceneManager.LoadSceneAsync(nivel);
        Progreso.text = "Cargando.... ";

        while (!Operacion.isDone)
        {
            Barra.fillAmount = Operacion.progress;
            porcentage = Operacion.progress * 100 / 0.9f;
            Progreso.text = "Cargando.... " + porcentage.ToString("00") + "%";
            yield return null;
            
        }
    }



    public void Salir()
    {
        Debug.Log("Salir");
    }
    
    public void Reiniciar()
    {
        ActivarBarra.SetActive(true);
        StartCoroutine(CargandoSimulacion(0));
    }

}

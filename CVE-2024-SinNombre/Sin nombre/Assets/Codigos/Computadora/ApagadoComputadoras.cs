using Newtonsoft.Json;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Networking;

public class ApagadoComputadoras : MonoBehaviour
{

    [SerializeField]
    private GameObject Prefrab;
    private GameObject Lugar;
    private GameObject Apagador;

    public class Computer
    {
        public Computer(string IDComputer, string En_Sistema)
        {
            this.IDComputer = IDComputer;
            this.En_Sistema = En_Sistema;
        }
        string IDComputer;
        string En_Sistema;
    }

    [SerializeField]
    private GameObject[] controladorAcceso = new GameObject[0];

    private Virus virus;
    private ChatControlador chatDesbl;

    bool m;

    public void Update()
    {
        virus = GameObject.FindObjectOfType<Virus>();
        chatDesbl = GameObject.FindObjectOfType<ChatControlador>();
    }

    public void ApagarBuscar()
    {
        
        Lugar = GameObject.Find("ListaA");
        chatDesbl.activacionOpc(14);
        if(Lugar == null)
        {
            Debug.Log("Ya esta apagado");
        }
        ApagadoInstanciado();
    }

    public void Cancelar()
    {
        Apagador = GameObject.Find("Apagado");
        if (Apagador.activeInHierarchy == true)
        {
            Destroy(Apagador);
        }
    }
    public void ApagadoInstanciado()
    {
        Vector3 posicion = new Vector3(455f, -52f, -3.5765f);
        var Apagadores = Instantiate(Prefrab, Lugar.gameObject.transform);
    }

    [SerializeField]
    private GameObject Denegado;

    public void AutentificacionCoordClaseS(string texto)
    {
        string Autorizacion = "nCGwIhs3a6fSLeN";
        if (m = Autorizacion == texto)
        {
            controladorAcceso[0].SetActive(false);
            controladorAcceso[1].SetActive(true);
        }
        else if (m = Autorizacion != texto)
        {
            Denegado.SetActive(false);
            Cancelar();
        }
    }

    public void AutentificacionAutorizaciones(string texto)
    {
        string Autorizacion = "Password1234";
        if (m = Autorizacion == texto)
        {
            controladorAcceso[1].SetActive(false);
            controladorAcceso[2].SetActive(true);

        }
        else if (m = Autorizacion != texto)
        {

            Denegado.SetActive(false);
            Cancelar();
        }
    }

    public void AutentificacionAdmRedes(string texto)
    {
        string Autorizacion = "8aU6J95Tno19KJX";
        if (m = Autorizacion == texto)
        {
            controladorAcceso[2].SetActive(false);
            Debug.Log("Computadoras apagadas");
            Debug.Log("Perdida por mala decision");
            Denegado.SetActive(false);
            //virus.malaDec = true;
            //virus.final4 = 4;
            //PlayerPrefs.SetInt("final4", virus.final4);
        }
        else if (m = Autorizacion != texto)
        {
            Denegado.SetActive(false);
            Cancelar();
        }
    }

}

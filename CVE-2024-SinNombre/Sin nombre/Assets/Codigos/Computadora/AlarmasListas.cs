using System.Collections;
using System.Collections.Generic;
using System.Linq;
using TMPro;
using UnityEngine;
using UnityEngine.UI;
using UnityEngine.Video;
using static ObtenerDatos;

public class AlarmasListas : MonoBehaviour
{
    //_______Total
    public bool virus_activo;

    [SerializeField]
    private GameObject DispotivoConPrefrab;
    private ObtenerDatos obtenerDatos;

    //__Alarmas
    [SerializeField]
    private GameObject AlarmasTDScrollView; //Puertas totales desactivas 
    public List<Alarm> AlarmasTD = new List<Alarm>();
    [SerializeField]
    private GameObject AlarmasTAScrollView; //Puertas totales activas
    public List<Alarm> AlarmasTA = new List<Alarm>();
    [SerializeField]
    private GameObject AlarmasTDIScrollView; //Puertas totates desactivas individual
    [SerializeField]
    private GameObject AlarmasTAIScrollView;//Puertas totales activas individual

    
    //______Piso 1

    [SerializeField]
    private GameObject AlarmasP1DScrollView; //Puertas totales desactivas 
    [SerializeField]
    private GameObject AlarmasP1AScrollView; //Puertas totales activas
    [SerializeField]
    private GameObject AlarmasP1DIScrollView; //Puertas totates desactivas individual
    [SerializeField]
    private GameObject AlarmasP1AIScrollView;

    //_____Piso 2

    [SerializeField]
    private GameObject AlarmasP2DScrollView; //Puertas totales desactivas 
    [SerializeField]
    private GameObject AlarmasP2AScrollView; //Puertas totales activas
    [SerializeField]
    private GameObject AlarmasP2DIScrollView; //Puertas totates desactivas individual
    [SerializeField]
    private GameObject AlarmasP2AIScrollView;

    //_____Piso 3

    [SerializeField]
    private GameObject AlarmasP3DScrollView; //Puertas totales desactivas 
    [SerializeField]
    private GameObject AlarmasP3AScrollView; //Puertas totales activas
    [SerializeField]
    private GameObject AlarmasP3DIScrollView; //Puertas totates desactivas individual
    [SerializeField]
    private GameObject AlarmasP3AIScrollView;

    //_____Site

    [SerializeField]
    private GameObject AlarmasSDScrollView; //Puertas totales desactivas 
    [SerializeField]
    private GameObject AlarmasSAScrollView; //Puertas totales activas
    [SerializeField]
    private GameObject AlarmasSDIScrollView; //Puertas totates desactivas individual
    [SerializeField]
    private GameObject AlarmasSAIScrollView;

    // Label de alarmas
    [SerializeField]
    private GameObject AlarmasTotalesActivas;
    [SerializeField]
    private GameObject AlarmasTotalesDesactivadas;

    // Lista de alarmas
    public List<Alarm> Alarmas = new List<Alarm>();

    [SerializeField]
    public MapaControl mapaControl;
    public Virus virus;
    public Tiempo inicio;

    // Start is called before the first frame update
    void Start()
    {
        obtenerDatos = this.gameObject.AddComponent<ObtenerDatos>();
        // obtener alarmas de obtenerDatos
        obtenerDatos.GetAlarms((List<Alarm> d) =>
        {
            Alarmas= d;
            RenderAlarmas();
            mapaControl.alarmas = Alarmas;

        });
    }

    void Update()
    {
        /*
        if (Input.GetKeyDown(KeyCode.A))
        {
            virus_activo = true;
        }*/
        if (virus_activo)
        {
            DesactivarAlarmas();
            // para evitar que se repita siempre
            virus_activo = false;
        }
    }

    public void DesactivarAlarmas()
    {
        foreach (Alarm puerta in Alarmas)
        {
            if (!puerta.EnSistema.Contains("Site"))
            {
                puerta.Status = "Desactivada";
            }
        }
        RenderAlarmas();
        mapaControl.alarmas = Alarmas;
    }

    public void RenderAlarmas()
    {
        int activas = Alarmas.Count(p => p.Status == "Activo");
        int desactivas = Alarmas.Count(p => p.Status == "Desactivado");
        AlarmasTotalesActivas.GetComponent<TMP_Text>().text = activas.ToString();
        AlarmasTotalesDesactivadas.GetComponent<TMP_Text>().text = desactivas.ToString();
        ListaAlarmasTotalesActivas(Alarmas);
        ListaAlarmasP1Act(Alarmas);
        ListaAlarmasP2Act(Alarmas);
        ListaAlarmasP3Act(Alarmas);
        ListaAlarmasSiteAct(Alarmas);
        ListaAlarmasTotalesDesactivadas(Alarmas);
        ListaAlarmasP1Desc(Alarmas);
        ListaAlarmasP2Desac(Alarmas);
        ListaAlarmasP3Desac(Alarmas);
        ListasAlarmasSiteDesc(Alarmas);
    }

    public void ListaAlarmasTotalesActivas(List<Alarm> AlarmasActTotal)
    {
        if (AlarmasTAScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasTAScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }

        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTA = AlarmasActTotal.Where(comp => comp.Status == "Activo" && comp.EnSistema != "No").ToList();

        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasTAScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasTAIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP1Act(List<Alarm> AlarmasP1Act)
    {
        if (AlarmasP1AScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP1AScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }

        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTA = AlarmasP1Act.Where(comp => comp.Status == "Activo" && comp.EnSistema == "Piso 1" && comp.EnSistema != "No").ToList();

        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP1AScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP1AIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP2Act(List<Alarm> AlarmasP2Act)
    {
        if (AlarmasP2AScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP2AScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }

        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTA = AlarmasP2Act.Where(comp => comp.Status == "Activo" && comp.EnSistema == "Piso 2" && comp.EnSistema != "No").ToList();

        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP2AScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP2AIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP3Act(List<Alarm> AlarmasP3Act)
    {
        if (AlarmasP3AScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP3AScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }

        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTA = AlarmasP3Act.Where(comp => comp.Status == "Activo" && comp.EnSistema == "Piso 3" && comp.EnSistema != "No").ToList();

        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP3AScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP3AIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasSiteAct(List<Alarm> AlarmasSiteAct)
    {
        if (AlarmasSAScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasSAScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTA = AlarmasSiteAct.Where(comp => comp.Status == "Activo" && comp.EnSistema == "Site" && comp.EnSistema != "No").ToList();

        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasSAScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTA.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTA)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasSAIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }
    //_____Desactivadas

    public void ListaAlarmasTotalesDesactivadas(List<Alarm> AlarmasDesacTotal)
    {
        if (AlarmasTDScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasTDScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTD = AlarmasDesacTotal.Where(comp => comp.Status == "Desactivada" && comp.EnSistema != "No").ToList();

        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasTDScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasTDIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP1Desc(List<Alarm> AlarmasP1Desac)
    {
        if (AlarmasP1DScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP1DScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTD = AlarmasP1Desac.Where(comp => comp.Status == "Desactivada" && comp.EnSistema == "Piso 1" && comp.EnSistema != "No").ToList();

        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP1DScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP1DIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP2Desac(List<Alarm> AlarmasP2Desac)
    {
        if (AlarmasP2DScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP2DScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTD = AlarmasP2Desac.Where(comp => comp.Status == "Desactivada" && comp.EnSistema == "Piso 2" && comp.EnSistema != "No").ToList();

        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP2DScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP2DIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListaAlarmasP3Desac(List<Alarm> AlarmasP3Desac)
    {
        if (AlarmasP3DScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasP3DScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTD = AlarmasP3Desac.Where(comp => comp.Status == "Desactivada" && comp.EnSistema == "Piso 3" && comp.EnSistema != "No").ToList();

        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasP3DScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasP3DIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }

    public void ListasAlarmasSiteDesc(List<Alarm> AlarmasSiteDesac)
    {
        if (AlarmasSDScrollView.transform.childCount > 0)
        {
            foreach (Transform child in AlarmasSDScrollView.transform)
            {
                GameObject.Destroy(child.gameObject);
            }
        }
        float separacionVertical = 55f;
        int c = 0;
        Vector3 posicion = new Vector3(452f, -23.8f, -3.5765f);
        AlarmasTD = AlarmasSiteDesac.Where(comp => comp.Status == "Desactivada" && comp.EnSistema == "Site" && comp.EnSistema != "No").ToList();

        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesActiva = Instantiate(DispotivoConPrefrab, AlarmasSDScrollView.transform);
                AlarmasTotalesActiva.transform.localPosition = posicion;

                posicion.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesActiva.SetActive(true);
            }
        }

        Vector3 posicionIndividual = new Vector3(445f, -37f, 0f);
        if (AlarmasTD.Count > 0)
        {
            foreach (Alarm alarma in AlarmasTD)
            {
                c += 1;
                var AlarmasTotalesIActiva = Instantiate(DispotivoConPrefrab, AlarmasSDIScrollView.transform);
                AlarmasTotalesIActiva.transform.localPosition = posicionIndividual;

                posicionIndividual.y -= separacionVertical;
                Text textoLabel = AlarmasTotalesIActiva.transform.Find("TextoControl").GetComponent<Text>();
                textoLabel.text = alarma.IDAlarm + " | " + alarma.AlarmName + " | " + alarma.DirectionIP + " | " + alarma.Site + " | " + alarma.Location;
                AlarmasTotalesIActiva.SetActive(true);
            }
        }
    }
    
}

using System.Collections;
using System.Collections.Generic;
using TMPro;
using Unity.VisualScripting;
using UnityEngine;

public class AplicacionPYS : MonoBehaviour
{

    public TextMeshProUGUI textoResBusquedaCopia;
    public TextMeshProUGUI textoCopiaABuscar;

    //Variables para obtener las funciones de la aplicacion.
    [SerializeField]
    private GameObject FuncCopias;
    [SerializeField]
    private GameObject FuncActualizar;
    [SerializeField]
    private GameObject FuncPerfil;

    //Variables uso de la funcion Actualizar

    [SerializeField]
    private GameObject Fijar;
    [SerializeField]
    private GameObject Aplicar;
    [SerializeField]
    private GameObject Copiar;

    //Mensajes.
    [SerializeField]
    private GameObject MensajeAdv;
    [SerializeField]
    private GameObject CopiaCompleta;

    //Variables uso de la funcion Perfil.
    public CambioPantalla DenegacionS;
    private bool apagado = false;

    //Buscador
    bool p; //Saber si cooinciden ambas strings.

    public void DengarS()
    {
        DenegacionS.Denegado();
    }

    public void Copias()
    {
        FuncCopias.SetActive(!FuncCopias.activeInHierarchy);
        FuncActualizar.SetActive(false);
        FuncPerfil.SetActive(false);
    }
    public void Actualizar()
    {
        FuncActualizar.SetActive(!FuncActualizar.activeInHierarchy);
        FuncCopias.SetActive(false);
        FuncPerfil.SetActive(false);
        CopiaCompleta.SetActive(false);
    }

    public void Perfil()
    {
        FuncPerfil.SetActive(!FuncPerfil.activeInHierarchy);
        FuncCopias.SetActive(false);
        FuncActualizar.SetActive(false);

    }


    //_________________________Funciones de la opcion de Actualizar_________________________________

    public void OpciActualizar()
    {
        MensajeAdv.SetActive(true);
        CopiaCompleta.SetActive(apagado);
    }

    public void OpcContinuar()
    {
        MensajeAdv.SetActive(false);
        CopiaCompleta.SetActive(true);

    }

    public void OpcCancelar()
    {
        MensajeAdv.SetActive(false);
        CopiaCompleta.SetActive(apagado);
    }

    //________________________Funciones de la opcion Copiar______________________________-

    public void Buscar(string Texto)
    {
        ObtenerDatos obtenerdatos = this.gameObject.AddComponent<ObtenerDatos>();
        obtenerdatos.GetCopias(HandleBuscarCopias);
        //Buscador
    }

    public void HandleBuscarCopias(List<ObtenerDatos.Copia> copias)
    {
        BuscadorDeCopia buscar_copia = this.gameObject.AddComponent<BuscadorDeCopia>();
        buscar_copia.listaDeCopias = copias;
        ObtenerDatos.Copia copia_encontrada = buscar_copia.BuscarCopiaSimilar(textoCopiaABuscar.text);
        textoResBusquedaCopia.text = copia_encontrada.CopiedDocument + " | " + copia_encontrada.OrginalDocument + " | " + copia_encontrada.CreateDate;
    }
}

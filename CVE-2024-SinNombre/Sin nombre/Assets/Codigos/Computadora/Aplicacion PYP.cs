using System.Collections;
using System.Collections.Generic;
using System.Linq;
using UnityEngine;
using UnityEngine.UI;
using static ObtenerDatos;

public class AplicacionPYP : MonoBehaviour
{
    [SerializeField]
    private GameObject AppManuales;
    [SerializeField]
    private GameObject AppAsociados;
    [SerializeField]
    private GameObject AppInventario;

    [SerializeField]
    private GameObject[] controladorAcceso = new GameObject[0];
    [SerializeField]
    private GameObject[] aplicacionesactivas = new GameObject[0];

    bool m;
    public Virus virus;

    public CorrupcionV nivelAvance;

    [SerializeField]
    private GameObject Denegado;

    //public Virus virus;
    //__________Inventario.
    [SerializeField]
    private GameObject InventoryPrefab;

    [SerializeField]
    private GameObject ScrollViewInventory;
    [SerializeField]
    private GameObject ContenedorInventory;

    //______Inventario Computadoras
    [SerializeField]
    private GameObject ScrollViewInvComp;
    [SerializeField]
    private GameObject ContenedorInvComp;

    //______Inventario Camaras
    [SerializeField]
    private GameObject ScrollViewInvCamaras;
    [SerializeField]
    private GameObject ContenedorInvCamaras;

    //______Inventario Puertas
    [SerializeField]
    private GameObject ScrollViewInvPuertas;
    [SerializeField]
    private GameObject ContenedorInvPuertas;

    //______Inventario Alarmas
    [SerializeField]
    private GameObject ScrollViewInvAlarma;
    [SerializeField]
    private GameObject ContenedorInvAlarma;

    private ObtenerDatos obtenerDatos;

    public List<Inventario> inventarioGlobal = new List<Inventario>();
    public List<Inventario> inventarioCoputadoras = new List<Inventario>();
    public List<Inventario> inventarioCamaras = new List<Inventario>();
    public List<Inventario> inventarioAlarmas = new List<Inventario>();
    public List<Inventario> inventarioPuertas = new List<Inventario>();

    public void Start()
    {
        obtenerDatos = this.gameObject.AddComponent<ObtenerDatos>();
        obtenerDatos.GetInventario((List<Inventario> InventarioTotal_) =>
        {
            inventarioGlobal = InventarioTotal_;
            
        });
    }

    public void TodoInventario()
    {
        float separacionVertical = 40f;
        Vector3 posicion = new Vector3(309.9108f, -23.8f, -3.5765f);
        foreach (Inventario inventarioG in inventarioGlobal)
        {
            var newInventarioUI = Instantiate(InventoryPrefab, ContenedorInventory.transform);
            newInventarioUI.transform.localPosition = posicion;
            posicion.y -= separacionVertical;

            Text textoLabel = newInventarioUI.transform.Find("IDcody").GetComponent<Text>();
            textoLabel.text = inventarioG.IDCode;

            Text textoNOb = newInventarioUI.transform.Find("NObject").GetComponent<Text>();
            textoNOb.text = inventarioG.ObjectName;

            Text textoDesc = newInventarioUI.transform.Find("DescripcionInv").GetComponent<Text>();
            textoDesc.text = inventarioG.Description;

            Text textoUF = newInventarioUI.transform.Find("UFisica").GetComponent<Text>();
            textoUF.text = inventarioG.PhysicalUbication;

            Text textDIP = newInventarioUI.transform.Find("DireccionIP").GetComponent<Text>();
            textDIP.text = inventarioG.DireccionIp;

            Text textoUI = newInventarioUI.transform.Find("Categoria").GetComponent<Text>();
            textoUI.text = inventarioG.InventoryUbication;

            Text textoConteo = newInventarioUI.transform.Find("NPxO").GetComponent<Text>();
            textoConteo.text = inventarioG.Quantity.ToString();

            newInventarioUI.SetActive(true);
        }
    }

    public void ObtenerInventarioComputadoras()
    {
        obtenerDatos.GetInventario(InvAreaComputadoras);
    }

   
    public void InvAreaComputadoras(List<Inventario> computadoras)
    {
        float separacionVertical = 40f;
        int c = 0;
        Vector3 posicion = new Vector3(309.9108f, -23.8f, -3.5765f);
        inventarioCoputadoras = computadoras.Where(comp => comp.InventoryUbication == "Computadora").ToList();
        if (inventarioCoputadoras.Count > 0)
        {
            foreach (Inventario computadora in inventarioCoputadoras)
            {
                c += 1;
                var InvCompt = Instantiate(InventoryPrefab, ContenedorInvComp.transform);
                InvCompt.transform.localPosition = posicion;
                posicion.y -= separacionVertical;

                Text textoLabel = InvCompt.transform.Find("IDcody").GetComponent<Text>();
                textoLabel.text = computadora.IDCode;

                Text textoNOb = InvCompt.transform.Find("NObject").GetComponent<Text>();
                textoNOb.text = computadora.ObjectName;

                Text textoDesc = InvCompt.transform.Find("DescripcionInv").GetComponent<Text>();
                textoDesc.text = computadora.Description;

                Text textoUF = InvCompt.transform.Find("UFisica").GetComponent<Text>();
                textoUF.text = computadora.PhysicalUbication;

                Text textDIP = InvCompt.transform.Find("DireccionIP").GetComponent<Text>();
                textDIP.text = computadora.DireccionIp;

                Text textoUI = InvCompt.transform.Find("Categoria").GetComponent<Text>();
                textoUI.text = computadora.InventoryUbication;

                Text textoConteo = InvCompt.transform.Find("NPxO").GetComponent<Text>();
                textoConteo.text = computadora.Quantity.ToString();

                InvCompt.SetActive(true);
            }
        }
    }

    public void ObtenerInventarioCamaras()
    {
        obtenerDatos.GetInventario(InvAreaCamaras);
    }

    public void InvAreaCamaras(List<Inventario> camaras)
    {
        float separacionVertical = 40f;
        int cam = 0;
        Vector3 posicion = new Vector3(309.9108f, -23.8f, -3.5765f);
        inventarioCamaras = camaras.Where(comp => comp.InventoryUbication == "Camara").ToList();
        if (inventarioCamaras.Count > 0)
        {
            foreach (Inventario camara in inventarioCamaras)
            {
                cam += 1;
                var InvCam = Instantiate(InventoryPrefab, ContenedorInvCamaras.transform);
                InvCam.transform.localPosition = posicion;
                posicion.y -= separacionVertical;

                Text textoLabel = InvCam.transform.Find("IDcody").GetComponent<Text>();
                textoLabel.text = camara.IDCode;

                Text textoNOb = InvCam.transform.Find("NObject").GetComponent<Text>();
                textoNOb.text = camara.ObjectName;

                Text textoDesc = InvCam.transform.Find("DescripcionInv").GetComponent<Text>();
                textoDesc.text = camara.Description;

                Text textoUF = InvCam.transform.Find("UFisica").GetComponent<Text>();
                textoUF.text = camara.PhysicalUbication;

                Text textDIP = InvCam.transform.Find("DireccionIP").GetComponent<Text>();
                textDIP.text = camara.DireccionIp;

                Text textoUI = InvCam.transform.Find("Categoria").GetComponent<Text>();
                textoUI.text = camara.InventoryUbication;

                Text textoConteo = InvCam.transform.Find("NPxO").GetComponent<Text>();
                textoConteo.text = camara.Quantity.ToString();

                InvCam.SetActive(true);
            }
        }
    }

    public void ObtenerInventarioPuertas()
    {
        obtenerDatos.GetInventario(InvAreaPuertas);
    }

    public void InvAreaPuertas(List<Inventario> puertas)
    {
        float separacionVertical = 40f;
        int c = 0;
        Vector3 posicion = new Vector3(309.9108f, -23.8f, -3.5765f);
        inventarioPuertas = puertas.Where(comp => comp.InventoryUbication == "Puerta").ToList();
        if (inventarioPuertas.Count > 0)
        {
            foreach (Inventario puerta in inventarioPuertas)
            {
                c += 1;
                var InvPue = Instantiate(InventoryPrefab, ContenedorInvPuertas.transform);
                InvPue.transform.localPosition = posicion;
                posicion.y -= separacionVertical;

                Text textoLabel = InvPue.transform.Find("IDcody").GetComponent<Text>();
                textoLabel.text = puerta.IDCode;

                Text textoNOb = InvPue.transform.Find("NObject").GetComponent<Text>();
                textoNOb.text = puerta.ObjectName;

                Text textoDesc = InvPue.transform.Find("DescripcionInv").GetComponent<Text>();
                textoDesc.text = puerta.Description;

                Text textoUF = InvPue.transform.Find("UFisica").GetComponent<Text>();
                textoUF.text = puerta.PhysicalUbication;

                Text textDIP = InvPue.transform.Find("DireccionIP").GetComponent<Text>();
                textDIP.text = puerta.DireccionIp;

                Text textoUI = InvPue.transform.Find("Categoria").GetComponent<Text>();
                textoUI.text = puerta.InventoryUbication;

                Text textoConteo = InvPue.transform.Find("NPxO").GetComponent<Text>();
                textoConteo.text = puerta.Quantity.ToString();

                InvPue.SetActive(true);
            }
        }
    }

    public void ObtenerInventarioAlarmas()
    {
        obtenerDatos.GetInventario(InvAreaAlarmas);
    }

    public void InvAreaAlarmas(List<Inventario> alarmas)
    {
        float separacionVertical = 40f;
        int c = 0;
        Vector3 posicion = new Vector3(309.9108f, -23.8f, -3.5765f);
        inventarioAlarmas = alarmas.Where(comp => comp.InventoryUbication == "Alarma").ToList();
        if (inventarioAlarmas.Count > 0)
        {
            foreach (Inventario alarma in inventarioAlarmas)
            {
                c += 1;
                var InvAla = Instantiate(InventoryPrefab, ContenedorInvAlarma.transform);
                InvAla.transform.localPosition = posicion;
                posicion.y -= separacionVertical;

                Text textoLabel = InvAla.transform.Find("IDcody").GetComponent<Text>();
                textoLabel.text = alarma.IDCode;

                Text textoNOb = InvAla.transform.Find("NObject").GetComponent<Text>();
                textoNOb.text = alarma.ObjectName;

                Text textoDesc = InvAla.transform.Find("DescripcionInv").GetComponent<Text>();
                textoDesc.text = alarma.Description;

                Text textoUF = InvAla.transform.Find("UFisica").GetComponent<Text>();
                textoUF.text = alarma.PhysicalUbication;

                Text textDIP = InvAla.transform.Find("DireccionIP").GetComponent<Text>();
                textDIP.text = alarma.DireccionIp;

                Text textoUI = InvAla.transform.Find("Categoria").GetComponent<Text>();
                textoUI.text = alarma.InventoryUbication;

                Text textoConteo = InvAla.transform.Find("NPxO").GetComponent<Text>();
                textoConteo.text = alarma.Quantity.ToString();

                InvAla.SetActive(true);
            }
        }
    }
    public void ElegirCategoria(int h)
    {
        switch (h)
        {
            case 1:
                TodoInventario();

                ScrollViewInventory.SetActive(true);
                ScrollViewInvComp.SetActive(false);
                ScrollViewInvCamaras.SetActive(false);
                ScrollViewInvPuertas.SetActive(false);
                ScrollViewInvAlarma.SetActive(false);
                break;
            case 2:
                ObtenerInventarioComputadoras();

                ScrollViewInvComp.SetActive(true);
                ScrollViewInventory.SetActive(false);
                ScrollViewInvCamaras.SetActive(false);
                ScrollViewInvPuertas.SetActive(false);
                ScrollViewInvAlarma.SetActive(false);
                break;
            case 3:
                ObtenerInventarioCamaras();

                ScrollViewInventory.SetActive(false);
                ScrollViewInvComp.SetActive(false);
                ScrollViewInvCamaras.SetActive(true);
                ScrollViewInvPuertas.SetActive(false);
                ScrollViewInvAlarma.SetActive(false);
                break;
            case 4:
                ObtenerInventarioPuertas();

                ScrollViewInvComp.SetActive(false);
                ScrollViewInventory.SetActive(false);
                ScrollViewInvCamaras.SetActive(false);
                ScrollViewInvPuertas.SetActive(true);
                ScrollViewInvAlarma.SetActive(false);
                break;
            case 5:
                ObtenerInventarioAlarmas();

                ScrollViewInvComp.SetActive(false);
                ScrollViewInventory.SetActive(false);
                ScrollViewInvCamaras.SetActive(false);
                ScrollViewInvPuertas.SetActive(false);
                ScrollViewInvAlarma.SetActive(true);
                break;
        }
    }

    public void Update()
    {
        IngresarContraseña(); //Autorizacion a la base de datos.

    }

    public void AppMan()//Funcion encargada del cambio a las pantallas Funcion Manuales
    {
        AppManuales.SetActive(!AppManuales.activeInHierarchy);
        AppInventario.SetActive(false);
        AppAsociados.SetActive(false);

    }

    public void AppAso()//Funcion encargada del cambio a las pantallas Funcion Asociados
    {
        AppAsociados.SetActive(!AppAsociados.activeInHierarchy);
        AppManuales.SetActive(false);
        AppInventario.SetActive(false);

    }

    public void AppInv()//Funcion encargada del cambio a las pantallas Funcion Inventarios
    {
        AppInventario.SetActive(!AppInventario.activeInHierarchy);
        AppManuales.SetActive(false);
        AppAsociados.SetActive(false);

        
    }
    public void IngresarContraseña()
    {
        if(virus.avance >= 35)
        {
            aplicacionesactivas[0].SetActive(true);
        }

        if (Denegado.activeInHierarchy == true && aplicacionesactivas[0].activeInHierarchy == true)
        {
            if (Input.GetKeyDown(KeyCode.RightAlt))
            {
                controladorAcceso[0].SetActive(!controladorAcceso[0].activeInHierarchy);
                Debug.Log("tecla apretada");
            }
        }
    }
    public void AutentificacionCoordClaseA(string texto)
    {
        string Autorizacion = "ZL0uX0Ps9cbsoDf";

        if (m = Autorizacion == texto)
        {
            Denegado.SetActive(false);
            controladorAcceso[0].SetActive(false);
            Debug.Log("contraseña correcta");
        }
        else if (m = Autorizacion != texto)
        {
            Denegado.SetActive(true);
            controladorAcceso[0].SetActive(false);
            if (virus.avance >= 35 && virus.avance <= 45)
            {
                aplicacionesactivas[0].SetActive(false);
            }
        }
    }
}
